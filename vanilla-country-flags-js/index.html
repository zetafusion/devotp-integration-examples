<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OTP SDK Test</title>
  <!-- Link to external CSS file -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>OTP Verification Test</h1>
    
    <div class="validation-info">
        <strong>Phone Number Format:</strong>
        <ul>
            <li>Must start with + followed by country code</li>
            <li>Only numbers allowed (no spaces, hyphens, or brackets)</li>
        </ul>
    </div>
    
        <input 
            type="email" 
            data-devotp="email" 
            placeholder="Enter your email"
        >

    <div class="input-container flex ">
        <span class="flag-container" id="flagContainer"></span>
        <input 
            type="tel" 
            id="phoneInput"
            data-devotp="phone" 
            placeholder="Enter your phone number (e.g., +1234567890)"
            maxlength="20"
        >
    </div>
    

    <!-- Status display -->
    <div id="status"></div>

    <!-- Load the SDK -->
    <script src="https://cdn.jsdelivr.net/npm/user-verification@0.1.8/dist/user-verification.cjs.production.min.js"></script>
    
    <!-- Load our phone validator -->
    <script src="./phone-validator.js"></script>
    
    <script>
        // Initialize SDK
        devInit('01JSDXTE94AKXHHVDVCPZDSJAX'); // Replace with your actual site ID

        // Listen for verification success
        document.addEventListener('dev-otp-verified', (event) => {
            console.log('Verification successful!', event.detail);
            
            // Show success message
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = 'Phone verification successful!';
            statusDiv.className = 'status-success';
            statusDiv.style.display = 'block';
        });

        // Listen for verification errors
        document.addEventListener('dev-otp-error', (event) => {
            console.log('Verification error:', event.detail);
            
            // Show error message
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = 'Verification failed: ' + (event.detail.message || 'Unknown error');
            statusDiv.className = 'status-error';
            statusDiv.style.display = 'block';
        });
    </script>
</body>
</html>